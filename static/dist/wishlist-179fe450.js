const p=document.querySelectorAll("[data-open-dialog]"),h=document.querySelectorAll("[data-close-dialog]"),g=document.querySelectorAll("[data-wishlist-form]");let d="",u="";const a=document.createElement("p"),m=e=>{const{form:t}=e.target,i=t.querySelector('input[name="name"]'),n=t.querySelector('textarea[name="description"]'),s=t.querySelector('button[type="submit"]'),l=c(n.value,u),o=c(i.value,d);s.disabled=!(l||o)};g.forEach(e=>{e.querySelectorAll('input[name="name"]').forEach(i=>{i.addEventListener("input",m)})});const y=async e=>{const t=e.getAttribute("data-list-id"),i=e.parentElement.previousElementSibling.textContent,n=document.querySelector("#edit-list form"),s=n.querySelector('textarea[name="description"]'),l=n.querySelector('input[name="name"]');l.value=i,n.setAttribute("action",`/wishlist/edit/${t}/`);try{const o=await fetch(`/wishlist/details/${t}/`);if(!o.ok)throw new Error("Network response was not ok");const r=await o.json();r.description&&(s.value=r.description),u=r.description}catch(o){console.error("There has been a problem with your fetch operation:",o)}},f=e=>{const t=e.getAttribute("data-list-id"),i=e.parentElement.previousElementSibling.textContent,n=document.querySelector("#delete-list form");let s=`Are you sure you want to delete ${i}? <br>  This action cannot be undone. All items in this list will be deleted.`;n.setAttribute("action",`/wishlist/delete/${t}/`),a.innerHTML=s,n.prepend(a)};p.forEach(e=>{e.addEventListener("click",async()=>{d=e.parentElement.previousElementSibling.textContent;const t=e.getAttribute("id"),i=document.querySelector(`dialog#${t}`);i.showModal(),i.querySelector("form").addEventListener("input",m),t==="edit-list"&&await y(e),t==="delete-list"&&f(e)})});h.forEach(e=>{e.addEventListener("click",()=>{e.closest("dialog").close()})});function c(e,t){return e!==""&&e!==t}
