const p=document.querySelectorAll("[data-open-dialog]"),h=document.querySelectorAll("[data-close-dialog]"),y=document.querySelectorAll("[data-wishlist-form]");let d="",u="";const a=document.createElement("p"),m=e=>{const{form:t}=e.target,i=t.querySelector('input[name="name"]'),n=t.querySelector('textarea[name="description"]'),o=t.querySelector('button[type="submit"]'),l=c(n.value,u),s=c(i.value,d);o.disabled=!(l||s)};y.forEach(e=>{e.querySelectorAll('input[name="name"]').forEach(i=>{i.addEventListener("input",m)})});const f=async e=>{const t=e.getAttribute("data-list-id"),i=e.parentElement.previousElementSibling.textContent,n=document.querySelector("#edit-list form"),o=n.querySelector('textarea[name="description"]'),l=n.querySelector('input[name="name"]');l.value=i,n.setAttribute("action",`/wishlist/edit/${t}/`);try{const s=await fetch(`/wishlist/details/${t}/`);if(!s.ok)throw new Error("Network response was not ok");const r=await s.json();r.description&&(o.value=r.description),u=r.description}catch(s){console.error("There has been a problem with your fetch operation:",s)}},g=e=>{const t=e.getAttribute("data-list-id"),i=e.parentElement.previousElementSibling.textContent,n=document.querySelector("#delete-list form");let o=`Are you sure you want to delete ${i}? <br>  This action cannot be undone. All items in this list will be deleted.`;n.setAttribute("action",`/wishlist/delete/${t}/`),a.innerHTML=o,n.prepend(a)};p.forEach(e=>{e.addEventListener("click",async()=>{var o;d=e.parentElement.previousElementSibling.textContent;const t=e.getAttribute("data-wishlist-type"),i=document.querySelector(`dialog#${t}-list`);i.showModal(),(o=i.querySelector("input[type=text]"))==null||o.focus(),i.querySelector("form").addEventListener("input",m),t==="edit"&&await f(e),t==="delete"&&g(e)})});h.forEach(e=>{e.addEventListener("click",()=>{e.closest("dialog").close()})});function c(e,t){return e!==""&&e!==t}
