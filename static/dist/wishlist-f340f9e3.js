const m=document.querySelectorAll("[data-open-dialog]"),p=document.querySelectorAll("[data-close-dialog]"),h=document.querySelectorAll("[data-wishlist-form]");let l="",d="";const u=t=>{const{form:e}=t.target,o=e.querySelector('input[name="name"]'),i=e.querySelector('textarea[name="description"]'),s=e.querySelector('button[type="submit"]'),a=c(i.value,d),n=c(o.value,l);s.disabled=!(a||n)};h.forEach(t=>{t.querySelectorAll('input[name="name"]').forEach(o=>{o.addEventListener("input",u)})});const g=async t=>{const e=t.getAttribute("data-list-id"),o=t.parentElement.previousElementSibling.textContent,i=document.querySelector("#edit-list form"),s=i.querySelector('textarea[name="description"]'),a=i.querySelector('input[name="name"]');a.value=o,i.setAttribute("action",`/wishlist/edit/${e}/`);try{const n=await fetch(`/wishlist/details/${e}/`);if(!n.ok)throw new Error("Network response was not ok");const r=await n.json();r.description&&(s.value=r.description),d=r.description}catch(n){console.error("There has been a problem with your fetch operation:",n)}};m.forEach(t=>{t.addEventListener("click",async()=>{l=t.parentElement.previousElementSibling.textContent,console.log(l);const e=t.getAttribute("id"),o=document.querySelector(`dialog#${e}`);o.showModal(),o.querySelector("form").addEventListener("input",u),e==="edit-list"&&await g(t)})});p.forEach(t=>{t.addEventListener("click",()=>{t.closest("dialog").close()})});function c(t,e){return t!==""&&t!==e}
